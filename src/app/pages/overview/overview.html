<p class="mode">
  Mode:
  <strong>{{ isMockMode() ? 'Mock Data' : 'Live Data' }}</strong>
</p>

@if (error()) {
  <div class="error-banner">
    ⚠️ {{ error() }}
  </div>
}

<div class="stats-grid">
  @for (stat of stats(); track stat.label) {
    <app-stat-card
      [label]="stat.label"
      [value]="stat.value"
      [hint]="stat.hint"
    />
  }
</div>

<div class="panels">
  <!-- SYSTEM HEALTH -->
  <section class="panel">
    <div class="panel-header between">
      <h3>System Health</h3>
      <app-status-badge [status]="health().status" />
    </div>

    <div class="panel-body grid">
      <div class="metric">
        <span class="label">Latency</span>
        <span class="value">{{ health().latencyMs }} ms</span>
      </div>

      <div class="metric">
        <span class="label">Error rate</span>
        <span class="value">{{ health().errorRatePct }}%</span>
      </div>

      <div class="metric">
        <span class="label">Last checked</span>
        <span class="value">{{ health().lastChecked }}</span>
      </div>

      <div class="metric">
        <span class="label">Status</span>
        <span class="value">{{ health().status }}</span>
      </div>

      <button
        class="btn"
        (click)="cycleStatus()"
        [disabled]="!isMockMode()"
      >
        Simulate status
      </button>
    </div>
  </section>

  <!-- ACTIVITY -->
  <section class="panel">
    <div class="panel-header between">
      <h3>Recent Activity</h3>
      <button
        class="btn ghost"
        (click)="addEvent()"
        [disabled]="!isMockMode()"
      >
        Add event
      </button>
    </div>

    <div class="panel-body">
      <app-activity-list [items]="activity()" />
    </div>
  </section>
</div>
