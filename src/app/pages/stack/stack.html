<p class="subtitle">
  Technologies used and planned for this dashboard
</p>

<div class="stack-grid">

  <!-- LANGUAGES -->
  <section class="panel">
    <div class="panel-header">
      <h3>Top Languages</h3>
      <span class="tag live">Live</span>
    </div>

    <ul class="stack-list">
      @if (loading()) {
      <li *ngFor="let i of [1, 2, 3, 4]" class="stack-item">
        <app-skeleton width="24px" height="24px" shape="circle"></app-skeleton>
        <div style="flex: 1">
          <app-skeleton width="60%" height="14px" style="margin-bottom: 4px"></app-skeleton>
          <app-skeleton width="40%" height="12px"></app-skeleton>
        </div>
      </li>
      } @else if (languages().length === 0) {
      <li>
        <strong>No languages found</strong>
      </li>
      } @else {
      <li *ngFor="let lang of languages()" class="stack-item clickable" (click)="selectLanguage(lang)">
        <img [src]="lang.logo" [alt]="lang.name" class="lang-icon" />
        <div class="lang-info">
          <strong>{{ lang.name }}</strong>
          <span>Used in {{ lang.count }} repositories</span>
        </div>
      </li>
      }
    </ul>
  </section>

  <!-- BACKEND -->
  <section class="panel">
    <div class="panel-header">
      <h3>Backend</h3>
      <span class="tag planned">Planned</span>
    </div>

    <ul class="stack-list">
      <li *ngFor="let item of backendStack" class="stack-item">
        <img [src]="item.logo" [alt]="item.name" class="lang-icon" />
        <div class="lang-info">
          <strong>{{ item.name }}</strong>
          <span>{{ item.description }}</span>
        </div>
      </li>
    </ul>
  </section>

  <!-- DEVOPS -->
  <section class="panel">
    <div class="panel-header">
      <h3>DevOps & Tools</h3>
      <span class="tag planned">Planned</span>
    </div>

    <ul class="stack-list">
      <li *ngFor="let item of devOpsStack" class="stack-item">
        <img [src]="item.logo" [alt]="item.name" class="lang-icon" />
        <div class="lang-info">
          <strong>{{ item.name }}</strong>
          <span>{{ item.description }}</span>
        </div>
      </li>
    </ul>
  </section>

</div>

<!-- MODAL -->
@if (selectedLanguage()) {
<div class="modal-backdrop" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="modal-title">
        <img [src]="selectedLanguage()!.logo" class="lang-icon large" />
        <h3>{{ selectedLanguage()!.name }} Repositories</h3>
      </div>
      <button class="btn ghost icon-only" (click)="closeModal()">✕</button>
    </div>

    <ul class="repo-list">
      <li *ngFor="let repo of selectedLanguage()!.repos">
        <div class="repo-info">
          <strong>{{ repo.name }}</strong>
          <span class="stars">★ {{ repo.stars }}</span>
        </div>
        <a [href]="repo.url" target="_blank" class="btn small">View</a>
      </li>
    </ul>
  </div>
</div>
}